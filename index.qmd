---
title: " :recycle: Making MATLAB projects reproducible and shareable"
format: revealjs
author: "**Dr David Wilby** (he/him)<br>[RSE Team](https://rse.shef.ac.uk/), The University of Sheffield<br>[rse.shef.ac.uk](https://rse.shef.ac.uk) | [davidwilby.dev](https://davidwilby.dev)"
institute: "<strong>OpenFest</strong>"
date: "Thurs 15th September 2022"
footer: "**slides**: [davidwilby.dev/reproducible_matlab](https://davidwilby.dev/reproducible_matlab) - **improve this talk!** [github.com/davidwilby/reproducible_matlab](https://github.com/davidwilby/reproducible_matlab)"
from: markdown+emoji
---

## Who am I?
### And why should I be talking about this?

::: columns

::: {.column width="50%"}
::: {layout-nrow=2}
<img src="assets/images/RSE_logo_blackborder.png" width=300 align="center" />

<img src="assets/images/SSIFullColour.png" width=300 align="center" />
:::
:::

::: {.column width="50%"}
* Previously researcher in biology/physics
* Research Software Engineer
* [Software Sustainability Institute](https://software.ac.uk/) Fellow
:::
:::

## What is reproducibility?

![How the Turing Way defines reproducible
research](assets/images/turing-way-definitions.jpg){fig-align="center"}

<font size="3">Image: [The Turing
Way](https://the-turing-way.netlify.app/reproducible-research/overview/overview-definitions.html)</font>


## Why is reproducibility important for research?

<br>

::: columns
::: {.column width="50%"}

![](assets/images/turing-reasons-reproducibility.png){fig-align="center"}

<font size="3">Image: [The Turing
Way](https://the-turing-way.netlify.app/reproducible-research/overview/overview-benefit.html)</font>

:::

::: {.column width="50%"}

* **Verification** :heavy_check_mark:
* **Share learning**
* **Re-use** :recycle:
* **Longevity** :hourglass_flowing_sand:
* **Efficiency** :watch:
* **Make code accessible**

:::
:::




## What is *software*?

![](assets/images/software-code-twitter-poll.png){fig-align="center"}

## The Challenge of Software Reproducibility

* Create a well-defined computational **"environment"**
* Document required software, data and where to get them
* Document steps to reproduce analysis

## General Principles of Reproducible Code

. . .

* Organise your project :bookmark_tabs:

. . .

<!-- ## Organise your project -->
::: columns
::: {.column width="50%"}
**Instead of** :x:
```
first_try.m
pretty.fig
stuff/
how%20torun.docx
data.csv
data_(01).csv
data.txt
```
:::
::: {.column width="50%"}
**Try** :heavy_check_mark:
```
data/
docs/
figs/
output/
src/
    01_download_data.m
    02_clean_data.m
    03_fit_model.m
    04_plot_figs.m
README.md
```
:::
:::

<font size="3">Via [BES Guide to Reproducible Research](https://www.britishecologicalsociety.org/wp-content/uploads/2019/06/BES-Guide-Reproducible-Code-2019.pdf)</font>



## General Principles of Reproducible Code

::: {.incremental}
* Share the code :microscope: (use a license!)
* Share the data :bar_chart: (license here too!)
* Define dependencies :nerd_face:
* Use version control :octopus:
* Document how to use the code :clipboard:
* Get colleagues to try it out! :people_holding_hands: 
:::

## MATLAB can be ... challenging

* No package manager (*Ã  la python, R, node etc.*)
* No virtual envrironments (sort of)
* Limited dependency discovery
* Proprietary source code
* MathWorks get most of their income from industry - so aren't largely motivated to develop open source tools and guidance
* Lots of weird binary file formats
* Doesn't get a lot of attention from (research) software engineers

## So why bother?

. . .

#### Lots of researchers use MATLAB.

12,000 active MATLAB licenses at The University of Sheffield

![](assets/images/matlab_publications.png){width="500px"}

<font size="3">Data from: [Web of Science](https://webofscience.com)</font>

## The Solution?

## MATLAB '[Projects](https://uk.mathworks.com/help/matlab/projects.html)'

![](assets/images/matlab_project.png){width="500"}

* almost like a virtual environment
* loads files onto the MATLAB `path`

## Aside: Jargon Blast :boom:

:::{.callout-note appearance="simple"}
# MATLAB [Projects](https://uk.mathworks.com/help/matlab/projects.html)
A tool for defining paths and files within a project, helping to improve portability.
:::

:::{.fragment}
:::{.callout-note appearance="simple"}
# MATLAB [Toolboxes](https://uk.mathworks.com/help/matlab/matlab_prog/create-and-share-custom-matlab-toolboxes.html)
A way of packaging up code as tools which will be used *across* your MATLAB installation. Kind of like 'packages' in other languages.
:::
:::

:::{.fragment}
:::{.callout-note appearance="simple"}
# MATLAB [Packages](https://uk.mathworks.com/help/matlab/matlab_oop/importing-classes.html)
Not *really* like packages in any other language.

A way of protecting namespaces, e.g. `import MyPackage.MyClass`.

In folders starting with `+` e.g. `+MyPackage/`
:::
:::

## Dependency management

![](assets/images/matlab_dependency_analyser.png){width="500"}

##
### Now what? :shrug:

. . .

* Either document how to obtain and install the dependencies

[Example](https://github.com/davidwilby/HermitCrabPolarizationVision2022)

<br>

* Provide them **with** the code, if small and if permitted


## Documentation
* readme files

* livescripts

# :takeout_box: **MATLAB projects _can_ be reproducible**

![](assets/images/Matlab_Logo.png){.absolute top=250 left=300 width="350"}

:::{.fragment}
![](assets/images/sunglasses.png){.absolute top=250 left=450 width="150"}
:::

<font size="3">Image: [Jarekt via Wikimedia](https://en.wikipedia.org/wiki/MATLAB#/media/File:Matlab_Logo.png){.absolute top=500 left=500}</font>


## Guiding Principles for Reproducibility
### (in my opinion..)

* write documentation
* think about environment management
* write examples (documentation)
* organise project
* tutorials (also documentation)
* explain how to use the code! (documentation)

## Acknowledgements

* [Software Sustainability Institute](https://software.ac.uk)
* [Research Software Engineering Team](https://rse.shef.ac.uk)
* in2Track Team (Civil Engineering) - Ehsan Kazemi, Yiqi Wu, Andy Nichols
* TeleRegain Team (ACCE) - Josh Giles, Salem Mansour, Jake Toth, Mahnaz Arvaneh

# Resources
::: columns
::: {.column width="50%"}
* [The Turing Way](https://the-turing-way.netlify.app)
* [BES Guide to Reproducible Research](https://www.britishecologicalsociety.org/wp-content/uploads/2019/06/BES-Guide-Reproducible-Code-2019.pdf)
* [repliMAT (Coming soon!)](https://davidwilby.dev/repliMAT)
* [Code Clinics](https://rse.shef.ac.uk/support/code-clinic/)
:::
::: {.column width="50%"}
<a href="https://davidwilby.dev/reproducible_matlab">![](assets/images/qrcode.png)</a>
:::
:::


